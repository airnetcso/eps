
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LATIHAN BAHASA KOREA</title>
<style>
body{margin:0;font-family:'Segoe UI',Arial,sans-serif;background:#f5f5f5}

/* LOGIN PAGE */
#login-page{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
  url('https://raw.githubusercontent.com/airnetcso/eps/main/image/bg1.jpg') center/cover no-repeat;
}
@keyframes fadeSlideUp {
  from { opacity:0; transform:translateY(40px);}
  to { opacity:1; transform:translateY(0);}
}
.login-container{
  width:90%; max-width:300px; padding:35px 25px; text-align:center;
  background:rgba(255,255,255,.12); backdrop-filter:blur(14px);
  border-radius:24px; box-shadow:0 12px 40px rgba(0,0,0,.5);
  animation: fadeSlideUp 0.9s ease-out forwards;
}
.login-container h1{
  color:#fff; font-size:28px; margin:0 0 20px; text-shadow:0 2px 6px rgba(0,0,0,.7);
}
input{
  width:100%; padding:16px; margin:12px 0; border:none; border-radius:14px;
  background:rgba(255,255,255,.18); color:#fff; font-size:16px;
  backdrop-filter:blur(4px); box-sizing:border-box; transition:all 0.3s;
}
input::placeholder{ color:rgba(255,255,255,.65);}
input:focus{ outline:none; background:rgba(255,255,255,.35); transform:scale(1.02);}
button{
  width:100%; padding:16px; margin:16px 0 8px; border:none; border-radius:14px;
  background:#ff6b9d; color:#fff; font-weight:bold; font-size:17px; cursor:pointer;
  box-shadow:0 6px 20px rgba(255,107,157,.5); transition:all 0.4s;
}
button:hover{ background:#ff8ac1; transform:translateY(-5px) scale(1.05); }

.copyright{ margin-top:35px; color:rgba(255,255,255,.8); font-size:13px; }

/* QUIZ PAGE & RESULT */
#quiz-page{display:none; min-height:100vh; padding:70px 0 80px; background:linear-gradient(#fdf6ec,#f7efe2);}
.header-fixed{position:fixed; top:0; left:0; right:0; display:flex; justify-content:space-between;
  align-items:center; background:#fff; padding:10px 15px; box-shadow:0 2px 10px rgba(0,0,0,0.1); z-index:1000;}
.timer, .submit-top{padding:12px 24px; text-align:center; color:#fff; font-weight:bold; font-size:16px; min-width:110px;}
.timer{background:#4caf50;}
.submit-top{background:#f44336;}
.container{max-width:540px; margin:auto; height:calc(100vh - 150px); overflow-y:auto; padding:0 15px;}
.question-wrapper{display:none; margin-bottom:40px;}
.question-wrapper.active{display:block;}
.box-passage{padding:0; margin-bottom:20px;}
.box-passage audio, .box-passage img{width:100%; margin-top:10px; display:block;}
.box-passage audio{background:#e8d5b8; height:48px; border-radius:0 !important;}
.box-question{background:#fff3e0; padding:20px; margin-top:15px;}
.option-item{display:flex; align-items:center; margin:18px 0; font-size:16px;}
.option-item input{display:none;}
.option-circle{width:32px; height:32px; border:2px solid #333; border-radius:50%; display:flex;
 align-items:center; justify-content:center; margin-right:12px; flex-shrink:0; font-weight:bold; font-size:15px;}
.option-item input:checked + .option-circle{background:#bbdefb; border-color:#2196f3; color:#2196f3;}
.nav-bottom{position:fixed; bottom:0; left:0; right:0; display:flex; justify-content:space-between;
 align-items:center; background:#fff; padding:10px 15px; box-shadow:0 -2px 10px rgba(0,0,0,0.1);}
.nav-bottom button{padding:12px 24px; text-align:center; color:#fff; border:none; font-weight:bold; font-size:16px; border-radius:0; min-width:110px;}
#prev{background:#2196f3;} #next{background:#ff9800;}
#result-page{display:none; max-width:600px; margin:auto; padding:20px 15px;}
.result-box{background:#fff; padding:25px; box-shadow:0 4px 15px rgba(0,0,0,0.1);}
.wrong-item{margin-top:20px; padding:15px; background:#ffebee; border-left:5px solid #f44336; border-radius:8px;}
.correct{color:green;font-weight:bold;}
.back-btn{margin-top:30px; padding:16px; background:#3f51b5; color:#fff; text-align:center; font-weight:bold; font-size:17px; border-radius:12px; cursor:pointer;}
</style>
</head>
<body>

<!-- LOGIN PAGE -->
<div id="login-page">
  <div class="login-container">
    <h1>LATIHAN SOAL</h1>
    <input id="userId" placeholder="User ID / ÏïÑÏù¥Îîî">
    <input id="kode" placeholder="Kode Soal / ÏãúÌóòÏΩîÎìú">
    <button id="btnLogin">LOGIN / Î°úÍ∑∏Ïù∏</button>
  </div>
  <div class="copyright">¬© 2026 Denzuka - Kim Jongun. All Rights Reserved.</div>
</div>

<!-- QUIZ PAGE -->
<div id="quiz-page">
  <div class="header-fixed">
    <div class="submit-top" id="submitTop">SUBMIT</div>
    <div class="timer" id="timer">50:00</div>
  </div>
  <div class="container"><form id="quiz-form"></form></div>
  <div class="nav-bottom">
    <button id="prev">PREV</button>
    <button id="next">NEXT</button>
  </div>
</div>

<!-- RESULT PAGE -->
<div id="result-page">
  <div class="result-box" id="resultBox"></div>
</div>

<script>
const SPREADSHEET_URL = "https://script.google.com/macros/s/AKfycbzxyVIlsyLswlfnQG618eeUZgN83dd2jfCjU0r7LsNHM3A6NNiibuCIb5e3CNs9J1vVhQ/exec";

// Mapping User ID -> Username
const userIdToName = {
  "2026010001":"Uus",
  "2026010002":"Hanarizka",
  "2026010003":"Windi",
  "2026010004":"Rismayayanti",
  "2026010005":"Sita",
  "2026010006":"Mila",
  "2026010007":"Aini",
  "2026010008":"Feinie",
  "2026010009":"Hamdan",
  "2026010010":"Heri",
  "2026010011":"Fikrisurya",
  "2026010012":"Mutiara",
  "2026010013":"Wantika",
  "2026010014":"Dini",
  "2026010015":"Kaniarostayuni",
  "2026010016":"Dikisetiawan",
  "2026010017":"Aisyah",
  "2026010018":"Rizka",
  "2026010019":"Dinda",
  "2026010020":"Zhafif",
  "2026010021":"Siwon",
  "2026010022":"Azizah",
  "2026010023":"Yppsdi",
  "2026010024":"Satria",
  "2026010025":"Sultan"
};

const kodeMapping = {
  "b12345":"soal1.json",
  "a09008":"soal2.json",
  "sarewae":"test.json",
  "w11765":"soal3.json",
  "urinara":"soal5.json",
  "cincay":"soal_urinara.json"
};

const BASE = "https://raw.githubusercontent.com/airnetcso/latbakor/main/soal/";

let questions=[], answers=[], current=0, time=3000, interval;
let currentUser="", currentKode="";

document.addEventListener("DOMContentLoaded", () => {
  const loginPage = document.getElementById("login-page");
  const quizPage = document.getElementById("quiz-page");
  const resultPage = document.getElementById("result-page");
  const btnLogin = document.getElementById("btnLogin");
  const submitTop = document.getElementById("submitTop");
  const quizForm = document.getElementById("quiz-form");
  const timerEl = document.getElementById("timer");
  const resultBox = document.getElementById("resultBox");

  btnLogin.onclick = () => {
    const userId = document.getElementById("userId").value.trim();
    const kode = document.getElementById("kode").value.trim().toLowerCase();
    const username = userIdToName[userId];

    if(!username){ alert("User ID tidak terdaftar"); return; }
    if(!kodeMapping[kode]){ alert("Kode soal salah"); return; }

    currentUser = username; // nama asli
    currentKode = kode;

    loginPage.style.display="none";
    quizPage.style.display="block";
    loadSoal(kodeMapping[kode]);
    startTimer();
  };

  async function loadSoal(file){
    let loaded = await (await fetch(BASE + file)).json();
    questions = loaded;
    answers = Array(questions.length).fill(null);
    quizForm.innerHTML="";
    questions.forEach((q,i)=>{
      quizForm.innerHTML+=`
      <div class="question-wrapper">
        <div class="box-passage">${q.audio?`<audio controls src="${q.audio}"></audio>`:""}${q.image?`<img src="${q.image}">`:""}</div>
        <div class="box-question">
          <p><b>${i+1}.</b> ${q.question}</p>
          ${Object.entries(q.options).map(([k,v],idx)=>`
            <label class="option-item">
              <input type="radio" name="q${i}" value="${k}">
              <span class="option-circle">${idx+1}</span> ${v}
            </label>`).join("")}
        </div>
      </div>`;
    });
    document.querySelectorAll("input[type=radio]").forEach(r=>r.onchange=()=>answers[+r.name.slice(1)]=r.value);
    show(0);
  }

  function show(n){
    document.querySelectorAll("audio").forEach(a=>{a.pause(); a.currentTime=0;});
    document.querySelectorAll(".question-wrapper").forEach((q,i)=>q.classList.toggle("active",i===n));
    current=n;
  }

  document.getElementById("prev").onclick=()=>current>0&&show(current-1);
  document.getElementById("next").onclick=()=>current<questions.length-1&&show(current+1);

  submitTop.onclick=()=>{
    const kosong = answers.findIndex(a=>a===null);
    if(kosong!==-1){ alert("Soal "+(kosong+1)+" belum dijawab"); show(kosong); return; }
    clearInterval(interval);
    quizPage.style.display="none";
    resultPage.style.display="block";
    let score=0, html="";
    questions.forEach((q,i)=>{
      const benar = q.answer;
      if(answers[i]===benar) score+=4;
      else html+=`<div class="wrong-item"><b>Soal ${i+1} salah</b><br>Jawaban benar: <span class="correct">${benar}</span></div>`;
    });
    const totalQuestions = questions.length;
    const percent = Math.round((score/(totalQuestions*4))*100);
    const formData = new URLSearchParams({
      waktu:new Date().toLocaleString('id-ID',{timeZone:'Asia/Jakarta'}),
      namaSiswa: currentUser,
      code: currentKode,
      latihanSoal: `${score}/${totalQuestions*4} (${percent}%)`,
      keterangan: html?"Ada jawaban salah":"Semua benar"
    });
    fetch(SPREADSHEET_URL,{method:"POST",mode:"no-cors",keepalive:true,body:formData});
    resultBox.innerHTML=`<h2>Nilai: ${score}</h2>${html||"<p class='correct'>Semua jawaban benar üéâ</p>"}<div class="back-btn" onclick="location.reload()">KEMBALI</div>`;
  };

  function startTimer(){
    interval=setInterval(()=>{
      timerEl.textContent=String(Math.floor(time/60)).padStart(2,"0")+":"+String(time%60).padStart(2,"0");
      if(--time<0) submitTop.onclick();
    },1000);
  }
});
</script>
</body>
</html>






