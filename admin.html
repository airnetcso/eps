<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Admin CBT</title>
<style>
body{
  font-family: Arial, sans-serif;
  background:#f5f5f5;
  padding:20px;
}
h2{
  margin-bottom:10px;
}
table{
  width:100%;
  border-collapse:collapse;
  background:#fff;
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:center;
}
th{
  background:#e2e8f0;
}
.empty{
  padding:20px;
  background:#fff3cd;
  border:1px solid #ffeeba;
  margin-top:15px;
}
.debug{
  margin-top:15px;
  background:#eef;
  padding:10px;
  font-size:13px;
}
button{
  margin-top:10px;
  padding:8px 14px;
}
</style>
</head>

<body>

<h2>üìä Data Nilai Siswa</h2>

<table>
  <thead>
    <tr>
      <th>No</th>
      <th>Nama</th>
      <th>Nilai</th>
      <th>Tanggal</th>
    </tr>
  </thead>
  <tbody id="tbody"></tbody>
</table>

<div id="info"></div>

<button onclick="clearData()">üóë Hapus Semua Data</button>

<div class="debug" id="debug"></div>

<script>
const tbody = document.getElementById("tbody");
const info  = document.getElementById("info");
const debug = document.getElementById("debug");

// ambil data mentah
const raw = localStorage.getItem("results");

// debug tampilkan raw data
debug.innerHTML = "<b>DEBUG localStorage['results']:</b><br>" + (raw ?? "NULL (belum ada data)");

let results = [];
try{
  results = JSON.parse(raw) || [];
}catch(e){
  results = [];
}

// kalau kosong
if(results.length === 0){
  info.innerHTML = "<div class='empty'>‚ùó Belum ada data nilai tersimpan</div>";
}else{
  results.forEach((r,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${r.name || "-"}</td>
      <td>${r.score ?? "-"}</td>
      <td>${r.date || "-"}</td>
    `;
    tbody.appendChild(tr);
  });
}

function clearData(){
  if(confirm("Hapus semua data nilai?")){
    localStorage.removeItem("results");
    location.reload();
  }
}
</script>

</body>
</html>
